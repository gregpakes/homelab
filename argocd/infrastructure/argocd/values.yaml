crds:
  install: true

global:
  # This becomes the default hostname for the server ingress
  domain: argocd.gregpakes.co.uk

server:
  insecure: true
  service:
    type: ClusterIP

  ingress:
    enabled: false
    ingressClassName: traefik-internal

    # New-style keys:
    hostname: argocd.gregpakes.co.uk
    path: /
    pathType: Prefix

    # If you're *not* doing TLS at Traefik yet:
    #tls: true   # you can omit, but spelling it out is clearer

configs:
  params:
    server.insecure: "true"   # ðŸ‘ˆ this is what becomes --insecure
  cm:
    # Match how you're actually accessing it â€“ if no TLS yet, use http:
    url: http://argocd.gregpakes.co.uk

    resource.customizations.ignoreResourceUpdates.ConfigMap: |
      jqPathExpressions:
        - '.metadata.annotations."cluster-autoscaler.kubernetes.io/last-updated"'
        - '.metadata.annotations."control-plane.alpha.kubernetes.io/leader"'
    resource.customizations.ignoreResourceUpdates.discovery.k8s.io_EndpointSlice: |
      jsonPointers:
        - /metadata
        - /endpoints
        - /ports

    resource.exclusions: |
      []