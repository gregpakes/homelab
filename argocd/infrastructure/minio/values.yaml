# MinIO (official) Helm values
# Chart: https://artifacthub.io/packages/helm/minio/minio

mode: standalone
replicas: 1

# Populated via External Secrets Operator; expected keys: rootUser, rootPassword
existingSecret: minio-root-credentials

persistence:
  enabled: true
  storageClass: longhorn
  accessMode: ReadWriteOnce
  size: 50Gi

# Provision buckets/users (run as post-install/upgrade jobs)
buckets:
  - name: loki-chunks
    policy: none
    purge: false
  - name: loki-ruler
    policy: none
    purge: false

users:
  - accessKey: loki
    existingSecret: minio-loki-user
    existingSecretKey: secretKey
    policy: readwrite

service:
  type: ClusterIP
  port: "9000"

consoleService:
  type: ClusterIP
  port: "9001"

# MinIO S3 API ingress (port 9000)
ingress:
  enabled: true
  ingressClassName: traefik-internal
  annotations:
    traefik.ingress.kubernetes.io/router.entrypoints: websecure
    traefik.ingress.kubernetes.io/router.tls: "true"
  path: /
  hosts:
    - s3.gregpakes.co.uk   # change to your domain
  tls: []

# MinIO Console ingress (port 9001)
consoleIngress:
  enabled: true
  ingressClassName: traefik-internal
  annotations:
    traefik.ingress.kubernetes.io/router.entrypoints: websecure
    traefik.ingress.kubernetes.io/router.tls: "true"
  path: /
  hosts:
    - minio.gregpakes.co.uk   # change to your domain
  tls: []
